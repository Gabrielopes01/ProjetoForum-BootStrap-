{if="$message != ''"}
<script>
    window.onload = function(){
        M.toast({html: '{$message}'});
    }
</script>
{/if}

<div class="row">
    <div class="col s12 m6 push-m3">
        <h3 class="light"; align="left">Usuários</h3>
<form method="POST">
        <ul class="listaFiltro z-depth-3">
            <li class="tituloFiltro">Busca: </li>
            <li class="busca">
                {if="$filtros.nome != ''"}
                <div class="input-field col s12">
                <input type="text" name="nome" id="nome" style="color: white; width: 50%" value="{$filtros.nome}">
                <input type="hidden" name="verBuscaNome" id="verBuscaNome" value="1">
                {else}
                <button class="btn gray" style="margin-top: 21px;" id="buscaNome" onclick="searchName()">Nome</button>
                <div class="input-field col s12">
                <input type="hidden" name="nome" id="nome" style="color: white; width: 50% ">
                <input type="hidden" name="verBuscaNome" id="verBuscaNome" value="0">
                {/if}
                <label for="nome" style="color: white; width: 50%">Nome</label>
                </div>
            </li>
            <li class="busca">
                {if="$filtros.email != ''"}
                <div class="input-field col s12">
                <input type="text" name="email" id="email" style="color: white; width: 50%" value="{$filtros.email}">
                <input type="hidden" name="verBuscaEmail" id="verBuscaNome" value="1">
                {else}
                <button class="btn gray" style="margin-top: 21px;" id="buscaEmail" onclick="searchEmail()">Email</button>
                <div class="input-field col s12">
                <input type="hidden" name="email" id="email" style="color: white; width: 50%">
                <input type="hidden" name="verBuscaEmail" id="verBuscaEmail" value="0">
                {/if}
                <label for="email" style="color: white; width: 50%">Email</label>
                </div>
            </li>
            <li class="buscaData">
                {if="$filtros.data != ''"}
                <div class="input-field col s12">
                <input type="text" class="datepicker" name="data" id="data" style="color: white; width: 50% " value="{$filtros.data}">
                <input type="hidden" name="verBuscaData" id="verBuscaData" value="1">
                {else}
                <button class="btn gray" style="margin-top: 21px;" id="buscaData" onclick="searchDate()">Data</button>
                <div class="input-field col s12">
                <input type="hidden" class="datepicker" name="data" id="data" style="color: white; width: 50% ">
                <input type="hidden" name="verBuscaData" id="verBuscaData" value="0">
                {/if}
                <label for="data" style="color: white; width: 50%">Data</label>
                </div>
            </li>
        </ul>
        <br>
        <a href="/admin/search/0" class="btn red" style="float: right; margin-left: 10px; margin-top: -15px">Limpar Busca</a>
        <button type="submit" class="btn gray" style="float: right; margin-top: -15px"><i class="material-icons">search</i></button>
</form>
    <br>
    <hr>

<hr>


<br>
<br>
<br>



<div class="row">
    <div class="col-sm-12 col-md-8 offset-md-2">
        <h1 align="center">Usuários</h3>
        <hr class="shadow">
        <br>

        <table class="table table-striped shadow">
            <thead class="table-dark">
                <tr>
                    <th>Id</th>
                    <th>Nome</th>
                    <th>Email</th>
                    <th>Criação</th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {loop="$usuarios"}
                <tr>
                    <th>{$value.id}</th>
                    <td>{$value.nome}</td>
                    <td>{$value.email}</td>
                    <td>{function="formatDate($value.data)"}</td>
                    <td><a href="/admin/edit/{$value.id}" class="buttonEdit"><i class="fas fa-edit"></i> Editar</td>
                    <td><a href="/admin/delete/{$value.id}" class="buttonDelete"><i class="fas fa-trash"></i> Excluir</a></td>
                </tr>
                {/loop}
            </tbody>
        </table>

        <hr>

        <nav aria-label="Page navigation example">
        <ul class="pagination">
        {if="$post == 1"}
            {if="$pagina == 0"}
                <li class="page-item disabled"><a class="page-link" href="#" disable><i class="fas fa-chevron-left"></i></a></li>
                <li class="page-item"><a class="page-link" href="#">1</a></li>
            {loop="$paginas"}
            {if="$value <= $pagina+4"}  <!--Altera o numero de resultados a aparecer-->
                {if="$value != 1"}
                <li class="page-item"><a class="page-link" href="filter/{$value-1}">{$value}</a></li>
                {/if}
            {/if}
            {/loop}
            {if="$numPags != 1"}
                <li class="page-item"><a class="page-link" href="{$pagina+1}"><i class="fas fa-chevron-right"></i></a></li>
            {else}
                <li class="page-item disabled"><a class="page-link" href="#" disabled><i class="fas fa-chevron-right"></i></a></li>
            {/if}
            {/if}

        {else}

            {if="$pagina == 0"}
                <li class="page-item disabled"><a class="page-link" href="#" disabled><i class="fas fa-chevron-left"></i></a></li>
                <li class="page-item active"><a class="page-link" href="0">1</a></li>
                {loop="$paginas"}
                {if="$value <= $pagina+4"}  <!--Altera o numero de resultados a aparecer-->
                    {if="$value != 1"}
                    <li class="page-item"><a class="page-link" href="{$value-1}">{$value}</a></li>
                    {/if}
                {/if}
                {/loop}
                {if="$numPags != 1"}
                    <li class="page-item"><a class="page-link" href="{$pagina+1}"><i class="fas fa-chevron-right"></i></a></li>
                {else}
                    <li class="page-item disabled"><a class="page-link" href="#" disabled><i class="fas fa-chevron-right"></i></a></li>
                {/if}

            {else}
                <li class="page-item"><a class="page-link" href="{$pagina-1}"><i class="fas fa-chevron-left"></i></a></li>
                {loop="$paginas"}
                    {if="$value <= $pagina+3"}<!--Altera o numero de resultados a aparecer-->
                        {if="$value-1 >= $pagina"}
                            {if="($value-1) == $pagina"}
                            {if="$pagina != 1"}
                                <li class="page-item"><a class="page-link" href="{$value-3}">{$value-2}</a></li>
                            {/if}
                            <li class="page-item"><a class="page-link" href="{$value-2}">{$value-1}</a></li>
                            <li class="page-item active"><a class="page-link" href="{$value-1}">{$value}</a></li>
                            {else}
                            <li class="page-item"><a class="page-link" href="{$value-1}">{$value}</a></li>
                            {/if}
                        {/if}
                    {/if}
                {/loop}
                {if="$pagina+1 < $numPags"}
                    <li class="page-item"><a class="page-link" href="{$pagina+1}"><i class="fas fa-chevron-right"></i></a></li>
                {else}
                    <li class="page-item disabled"><a a class="page-link" href="#" disabled><i class="fas fa-chevron-right"></i></a></li>
                {/if}


            {/if}
        {/if}
        </ul>
        </nav>

        <a href="/admin/add" class="btn btn-primary addButton"><i class="fas fa-plus-circle"></i> Adicionar Usuário</a>
    </div>
</div>

<br>
<br>
<br>





<script>
function searchName() {
  document.getElementById("buscaNome").remove();
  document.getElementById('nome').type = "text";
  document.getElementById('verBuscaNome').value = 1;
}

function searchEmail() {
  document.getElementById("buscaEmail").remove();
  document.getElementById('email').type = "text";
  document.getElementById('verBuscaEmail').value = 1;
}

function searchDate() {
  document.getElementById("buscaData").remove();
  document.getElementById('data').type = "text";
  document.getElementById('verBuscaData').value = 1;
}
</script>

